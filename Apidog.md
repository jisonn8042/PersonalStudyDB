# Apidogについて

今回開発してシステムの詳細や仕様をまとめるためにApidogを使いました。</br>
</br>
Apidogを選んだ理由は、ドキュメント作成やテスト、モックサーバーといった多様な機能があって、API関連の作業をこのツールで一元管理できると思い選びました。</br>
</br>
この文書の目的は使いながら学んだことを忘れないため、忘れたときは参考するため、なお、自分の経験を公有するため書きました。</br>
</br>
</br>

## 目次

Ⅰ. [Apidogについて](#ⅰ-apidogについて)

Ⅱ. [API管理](#ⅱ-api管理)

1. [環境構築](#1-環境構築)</br>
1.1. [baseURL作成](#11-baseurl作成)</br>
1.2. [token作成](#12-token作成apiリクエストにtokenが必要となる場合作成)
2. [API作成](#2-api作成)</br>
2.1. [API保存](#21-api保存)</br>
2.2. [メソッド、endpoint作成](#22-メソッドendpoint作成)</br>
2.3. [Header作成](#23-header作成)</br>
2.4. [Body作成](#24-body作成)</br>
2.5. [parameter作成](#25-parameter作成)</br>
2.6. [仕様作成](#26-仕様作成)

Ⅲ. [これから追加必要他の機能](#ⅲ-これから追加必要他の機能)

1. モックサーバー
2. 自動テスト
3. ドキュメント公開
4. 履歴

</br>
</br>

## Ⅰ. Apidogについて

ApidogはAPI開発におけるすべての工程を一元管理できるAPIの開発プラットフォームです。</br>
過去にはAPIを開発するためにの設計はSwagger、テストはPostman文書化は他のツールを使用する形に行いました。</br>
でも、Apidogを使用することで設計から文書化まで1つのプラットフォームで終わらせます。</br>
</br>
Apidogには大きく4つの機能があります。</br>

- **API設計、開発**
- **APIデバッグ、テスト**
- **ドキュメント生成、公有**
- **モックサーバー**

</br>

*すべての機能に関いて学ん内容を書きたいのですが工数がかかるため、*
*一応、使いながら新しく学んだことがあったら追加してい行く形になると思います。*

*この文書では機能をApidog内に分かれているメニューを基準として内容書きます。*

</br>
</br>

## Ⅱ. API管理

- APIを作成してリクエストを送信しレスポンスを確認することができます。
- API仕様を作成し、正しい通信が行っていることを確認することができます。

</br>

### 1. 環境構築

API作成をもっと便利に進むために設定します。</br>
</br>

#### 1.1. baseURL作成

開発環境としてbaseURLを作成しておくとAPIを作成する度自動にbaseURLを記入してくれます。</br>

> baseURL作成方法

1. 右上の環境選択をクリック
2. 環境管理をクルック
3. 環境選択
4. baseURL入力

</br>

#### 1.2. token作成（APIリクエストにtokenが必要となる場合作成）

ここではいろんな方法があると思います。</br>
今回はAPI作成するときセットできる"後処理"という機能を活用して実現しました。</br>
tokenを取得するAPIを作成した上、レスポンスとして取得したtokenを環境変数に保存するようにしましたようにしました。</br>

> token作成方法

1. API作成を参考してtoken値を取得するAPIを作成。
2. 画面中央上段にあるRequest、設計、プレビューの中でRequestをクリック
3. 住所を書くところの下で右の方を見るとある"後処理"メニューをクリック
4. 後処理を追加をクリック
5. カスタムScriptをクリック
6. レスポンスでtokenを取得して環境変数に保存するコードを作成 *（下のコード　例1を参照）*
7. baseURLをセットするときに入った環境管理に入って環境変数のところに　変数名：access_token　現在値：token値でセットされていることを確認

</br>
例1</br>

```javascript
//JSON形式のレスポンスをJavaScriptで使えるオブジェクトに変換する
const responseJson = pm.response.json();

//ここは自分がセットしたレスポンスの形式に合わせてtokenの値を取得するようにコード作成
const token = responseJson.token;

//環境変数としてセット　変数名：access_token　値：token値
pm.environment.set("access_token", token);

//セットされたことを知らせるメッセージ
console.log("新しいtokenが保存されました。" + token);
```

</br>
</br>

### 2. API作成

実際に開発したAPIを登録します。</br>
</br>

#### 2.1. API保存

API情報を作成する保存します。

> メソッド、endpoint作成方法

</br>

#### 2.2. メソッド、endpoint作成

> メソッド、endpoint作成方法

1. 左メニューの "+" ボタンをクリック
2. 新しいAPIクリック
3. 上段の住所入力欄に登録するAPIのメソッド、既に入力されているbaseURLの後ろにendpointを作成

</br>

#### 2.3. Header作成

APIの仕様を確認しリクエストに必要なHeaderを作成します。

> Header作成方法

1. 住所を書くところの左下にある"Headers"メニューをクリック
2. パラメータ名の下にある"パラメータを追加"をクリック
3. APIの仕様に合う値を選択及び入力
4. 右にあるパラメータ値を入力するところをクリックし、APIの仕様に合う値を選択及び入力

</br>

#### 2.4. Body作成

APIの仕様を確認しリクエストに必要なデータを作成します。

> Body作成方法

1. "Headers"メニューの左にある"Body"メニューをクリック
2. 

#### 2.5. parameter作成

#### 2.6. 仕様作成

***

### Ⅲ. これから追加必要他の機能

1. モックサーバー
2. 自動テスト
3. ドキュメント公開
4. 履歴

































